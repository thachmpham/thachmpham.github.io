#! /usr/bin/bash

# ====  global variables
workspace=$(git rev-parse --show-toplevel)


# ====  functions
convert_markdown_to_html() {
    local input_file=$1
    local output_file=$2

    pandoc -f markdown -t html \
    -s --highlight-style breezeDark \
    --include-in-header ${workspace}/bin/header.html \
    --include-after-body ${workspace}/bin/footer.html \
    -F pandoc-plantuml \
    -o ${output_file} \
    ${input_file}
}

generate_post() {
    local post_name=$1
    convert_markdown_to_html    ${workspace}/md/${post_name}.md \
                                ${workspace}/html/${post_name}.html
}


# ====  main()
# ====  generate home page
pandoc -f markdown -t html -s \
    --include-after-body ${workspace}/bin/footer_for_home.html \
    -o ${workspace}/index.html \
    ${workspace}/md/index.md


# ====  generate posts
# ====  Virtualization
# generate_post veth
# generate_post vbridge
# generate_post vdummy-interface
# generate_post vbond-interface

# ====  Networking
# generate_post arp
# generate_post ip-routing
# generate_post dhcp
# generate_post pxe

# ====  Distributed Systems
# generate_post vip
# generate_post drbd

# ====  OpenSAF
# generate_post opensaf-install
# generate_post opensaf-1sc
# generate_post opensaf-2sc
# generate_post opensaf-imm
# generate_post opensaf-smf
# generate_post opensaf-log
# generate_post opensaf-amf-non-sa-aware
# generate_post opensaf-amf-sa-aware
# generate_post opensaf-healthcheck


# ====  GDB
# generate_post gdb-program-started-by-script
generate_post gdb-program-started-by-systemd
generate_post gdb-ha-program


# ====  Cheatsheets
# generate_post kvm
# generate_post fdisk
# generate_post systemd


# ====  About
# generate_post about

